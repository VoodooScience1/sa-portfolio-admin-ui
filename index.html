<!doctype html>
<html>
	<head>
		<title>Admin</title>
		<link rel="stylesheet" href="/assets/css/nav.css" />
		<link rel="stylesheet" href="/assets/css/style.css" />
		<script src="/assets/script/nav-close.js" defer></script>
		<script src="/assets/script/nav-marker.js" defer></script>
		<script src="/script/cms-portal.js" defer></script>
	</head>
	<body>
		<div id="nav-placeholder"></div>
		<div id="cms-status-strip"></div>
		<div id="cms-banner"></div>

		<script>
			window.addEventListener("DOMContentLoaded", () => {
				fetch("/assets/partials/nav.html")
					.then((r) => r.text())
					.then((html) => {
						document.getElementById("nav-placeholder").innerHTML = html;
						if (window.setActiveNav) window.setActiveNav();

						// Match CMS strip background to nav
						const strip = document.querySelector(".cms-strip");
						const nav = document.querySelector(".main-nav");
						if (nav && strip) {
							const bg = getComputedStyle(nav).backgroundColor;
							strip.style.backgroundColor = bg;
						}

						// Match CMS position to nav height
						const syncNavHeight = () => {
							const nav = document.querySelector(".main-nav");
							if (!nav) return;
							document.documentElement.style.setProperty(
								"--nav-h",
								`${nav.offsetHeight}px`,
							);
						};

						syncNavHeight();
						window.addEventListener("resize", syncNavHeight);
					})
					.catch((err) => console.error("Nav load failed:", err));
			});
		</script>

		<!-- CMS mounts here -->
		<div id="cms-portal"></div>
	</body>
</html>
