<!doctype html>
<html>
	<head>
		<title>Admin</title>
		<link rel="stylesheet" href="/assets/css/nav.css" />
		<link rel="stylesheet" href="/assets/css/style.css" />
		<script src="/assets/script/nav-close.js" defer></script>
		<script src="/assets/script/nav-marker.js" defer></script>
		<script src="/script/cms-portal.js" defer></script>
	</head>

	<body>
		<div id="nav-placeholder"></div>
		<div id="cms-status-strip"></div>
		<div id="cms-banner"></div>
		<div id="cms-portal"></div>

		<script>
			window.addEventListener("DOMContentLoaded", () => {
				fetch("/assets/partials/nav.html")
					.then((r) => r.text())
					.then((html) => {
						document.getElementById("nav-placeholder").innerHTML = html;
						if (window.setActiveNav) window.setActiveNav();

						// Recompute spacer after nav is injected (and on resize)
						const syncStackSpacer = () => {
							const stack = document.getElementById("cms-fixed-stack");
							const spacer = document.getElementById("cms-stack-spacer");
							if (!stack || !spacer) return;

							spacer.style.height = `${stack.offsetHeight + 20}px`; // +20px gap before banner
						};

						syncStackSpacer();
						window.addEventListener("resize", syncStackSpacer);

						// Also run once after CMS mounts (fonts can change heights)
						setTimeout(syncStackSpacer, 50);
					})
					.catch((err) => console.error("Nav load failed:", err));
			});
		</script>
	</body>
</html>
