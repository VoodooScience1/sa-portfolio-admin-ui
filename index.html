<!doctype html>
<html>
	<head>
		<title>Admin</title>
		<link rel="stylesheet" href="/assets/css/nav.css" />
		<link rel="stylesheet" href="/assets/css/style.css" />
		<script src="/assets/script/nav-close.js" defer></script>
		<script src="/assets/script/nav-marker.js" defer></script>
		<script src="/script/cms-portal.js" defer></script>
	</head>
	<body>
		<!-- Fixed stack -->
		<div id="cms-fixed-stack">
			<div id="nav-placeholder"></div>
			<div id="cms-status-strip"></div>
		</div>

		<!-- Spacer to push the page below the fixed stack -->
		<div id="cms-stack-spacer"></div>

		<!-- Banner should start 20px below the stack -->
		<div id="cms-banner"></div>

		<!-- CMS mounts here -->
		<div id="cms-portal"></div>

		<script>
			window.addEventListener("DOMContentLoaded", () => {
				fetch("/assets/partials/nav.html")
					.then((r) => r.text())
					.then((html) => {
						document.getElementById("nav-placeholder").innerHTML = html;
						if (window.setActiveNav) window.setActiveNav();

						const syncStack = () => {
							const stack = document.getElementById("cms-fixed-stack");
							const spacer = document.getElementById("cms-stack-spacer");
							if (!stack || !spacer) return;

							// set spacer = stack height + 20px (your requested gap before banner)
							const h = Math.ceil(stack.getBoundingClientRect().height);
							spacer.style.height = h + 20 + "px";

							// optional: make strip match nav background
							const nav = document.querySelector(".main-nav");
							const strip = document.querySelector(".cms-strip");
							if (nav && strip) {
								strip.style.backgroundColor =
									getComputedStyle(nav).backgroundColor;
							}
						};

						// Run once now, then again after cms-portal.js mounts the strip contents
						syncStack();
						requestAnimationFrame(syncStack);
						window.addEventListener("resize", syncStack);
					})
					.catch((err) => console.error("Nav load failed:", err));
			});
		</script>
	</body>
</html>
